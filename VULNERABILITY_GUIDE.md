# Vulnerable Task Manager - Security Learning Application

## Overview

This is an **intentionally vulnerable** Node.js web application designed for DevSecOps security testing and learning. The application functions as a basic task management system but contains multiple security vulnerabilities for educational purposes.

---

## Application Architecture

### Technology Stack
- **Backend**: Node.js with Express.js framework
- **Database**: SQLite (file-based database)
- **Frontend**: Vanilla HTML, CSS, and JavaScript
- **Session Management**: Express-session middleware
- **Password Handling**: bcrypt library (improperly implemented)

### File Structure
```
secure-task-manager/
├── app.js              # Main server file
├── package.json        # Dependencies and scripts
├── tasks.db           # SQLite database (created automatically)
└── public/
    ├── index.html     # Login/Registration page
    └── dashboard.html # Task management interface
```

---

## Core Functionality

### User Management
- **Registration**: Users can create accounts with username, email, and password
- **Authentication**: Login system with session-based authentication
- **Sessions**: User sessions maintained server-side

### Task Management
- **Create Tasks**: Add new tasks with title and description
- **View Tasks**: Display all user tasks in a dashboard
- **Search Tasks**: Filter tasks by title or description
- **Update Tasks**: Mark tasks as complete/incomplete
- **Delete Tasks**: Remove tasks from the system

---

## Database Schema

### Users Table
```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE,
    email TEXT,
    password TEXT
);
```

### Tasks Table
```sql
CREATE TABLE tasks (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER,
    title TEXT,
    description TEXT,
    completed BOOLEAN DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (id)
);
```

---

## Setup and Installation

### Prerequisites
- Node.js (v14 or higher)
- npm package manager

### Installation Steps
1. **Install dependencies**:
   ```bash
   npm install
   ```

2. **Start the application**:
   ```bash
   npm start
   # or for development with auto-restart:
   npm run dev
   ```

3. **Access the application**:
   - Open browser to `http://localhost:3000`
   - Register a new user account
   - Login with your credentials

---

## Security Vulnerabilities (Educational)

> ⚠️ **Warning**: This application contains intentional security flaws for learning purposes. Never deploy in production!

### 1. Hardcoded Secrets
- **Location**: `app.js` line 13
- **Issue**: Secret key hardcoded in source code
- **Impact**: Session hijacking, credential compromise

### 2. Vulnerable Dependencies
- **Issue**: Lodash version 4.17.10 has known security vulnerabilities
- **Impact**: Potential remote code execution

### 3. Insecure Session Configuration
- **Location**: `app.js` lines 41-50
- **Issues**: 
  - `secure: false` - allows session cookies over HTTP
  - `httpOnly: false` - cookies accessible via JavaScript (XSS risk)
- **Impact**: Session hijacking, XSS attacks

### 4. SQL Injection Vulnerabilities
Multiple locations with direct string concatenation:

#### Login Endpoint (`POST /login`)
```javascript
const query = `SELECT * FROM users WHERE username = '${username}'`;
```

#### Task Search (`GET /api/tasks`)
```javascript
query += ` AND (title LIKE '%${search}%' OR description LIKE '%${search}%')`;
```

#### Task Deletion (`DELETE /api/tasks/:id`)
```javascript
const query = `DELETE FROM tasks WHERE id = ${taskId}`;
```

### 5. Plain Text Password Storage
- **Location**: Registration and login logic
- **Issue**: Passwords stored without hashing
- **Impact**: Complete credential compromise if database is accessed

### 6. Cross-Site Scripting (XSS)
- **Location**: `dashboard.html` task rendering
- **Issue**: User input directly inserted into DOM without sanitization
- **Impact**: JavaScript code execution in user browsers

### 7. Improper Use of eval()
- **Location**: `POST /api/tasks` endpoint
- **Issue**: Using `eval()` for "sanitization"
- **Impact**: Remote code execution

### 8. Missing Input Validation
- **Issue**: No validation on user registration or task creation
- **Impact**: Data integrity issues, potential injection attacks

### 9. Insufficient Authorization
- **Issue**: Users can modify/delete tasks without ownership verification
- **Impact**: Unauthorized data access and modification

### 10. Information Disclosure
- **Location**: `GET /debug` endpoint
- **Issue**: Exposes sensitive application data
- **Impact**: Information leakage, credential exposure

---

## Testing the Vulnerabilities

### SQL Injection Examples

**Login Bypass**:
```
Username: admin' OR '1'='1' --
Password: anything
```

**Data Extraction via Search**:
```
Search: ' UNION SELECT username, password, email, id FROM users --
```

### XSS Examples

**Task Title**:
```html
<script>alert('XSS Vulnerability!')</script>
```

**Task Description**:
```html
<img src="x" onerror="alert('Stored XSS')">
```

---

## Learning Objectives

This application is designed to help you learn:

1. **Vulnerability Identification**: Recognize common web application security flaws
2. **Impact Assessment**: Understand the potential damage of each vulnerability
3. **Remediation Techniques**: Learn how to properly fix security issues
4. **Security Testing**: Practice manual and automated security testing
5. **Secure Coding**: Understand secure development practices

---

## Security Best Practices (What Should Be Done)

### Input Validation and Sanitization
- Validate all user inputs
- Use parameterized queries for database operations
- Sanitize output before rendering in HTML

### Authentication and Authorization
- Hash passwords using bcrypt with proper salt rounds
- Implement proper session security
- Verify user ownership before allowing operations

### Secure Configuration
- Use environment variables for secrets
- Enable secure session settings in production
- Keep dependencies updated

### Error Handling
- Don't expose sensitive information in error messages
- Implement proper logging without sensitive data

---

## Disclaimer

This application is created solely for educational and training purposes. It contains intentional security vulnerabilities and should **never** be deployed to production environments or used with real user data.

---

## License

Educational use only. Not for production deployment.